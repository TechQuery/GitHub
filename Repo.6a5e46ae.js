var e=globalThis.parcelRequire94c2;(0,e.register)("gTPoJ",function(s,t){Object.defineProperty(s.exports,"__esModule",{value:!0,configurable:!0}),Object.defineProperty(s.exports,"default",{get:()=>m,set:void 0,enumerable:!0,configurable:!0});var a=e("7SioY"),r=e("dZnzp"),i=e("1rFJW"),l=e("iHeii"),n=e("e1olD"),c=function(e,s,t,a,r,i){function l(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var n,c=a.kind,o="getter"===c?"get":"setter"===c?"set":"value",d=!s&&e?a.static?e:e.prototype:null,h=s||(d?Object.getOwnPropertyDescriptor(d,a.name):{}),m=!1,u=t.length-1;u>=0;u--){var p={};for(var b in a)p[b]="access"===b?{}:a[b];for(var b in a.access)p.access[b]=a.access[b];p.addInitializer=function(e){if(m)throw TypeError("Cannot add initializers after decoration has completed");i.push(l(e||null))};var x=(0,t[u])("accessor"===c?{get:h.get,set:h.set}:h[o],p);if("accessor"===c){if(void 0===x)continue;if(null===x||"object"!=typeof x)throw TypeError("Object expected");(n=l(x.get))&&(h.get=n),(n=l(x.set))&&(h.set=n),(n=l(x.init))&&r.unshift(n)}else(n=l(x))&&("field"===c?r.unshift(n):h[o]=n)}d&&Object.defineProperty(d,a.name,h),m=!0},o=function(e,s,t){for(var a=arguments.length>2,r=0;r<s.length;r++)t=a?s[r].call(e,t):s[r].call(e);return a?t:void 0},d=function(e,s,t,a){if("a"===t&&!a)throw TypeError("Private accessor was defined without a getter");if("function"==typeof s?e!==s||!a:!s.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?a:"a"===t?a.call(e):a?a.value:s.get(e)},h=function(e,s,t,a,r){if("m"===a)throw TypeError("Private method is not writable");if("a"===a&&!r)throw TypeError("Private accessor was defined without a setter");if("function"==typeof s?e!==s||!r:!s.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?r.call(e,t):r?r.value=t:s.set(e,t),t},m=(()=>{var e,s,t,m,u,p;let b,x,j,v,f,g=[(0,i.component)({tagName:"repo-page"}),i.observer],w=[],N=HTMLElement,y=[],T=[],C=[],k=[],_=[],P=[];x=class extends N{constructor(){super(...arguments),m.set(this,o(this,y,"")),u.set(this,(o(this,T),o(this,C,""))),p.set(this,(o(this,k),o(this,_,"source"))),Object.defineProperty(this,"handleTabClick",{enumerable:!0,configurable:!0,writable:!0,value:(o(this,P),e=>{this.activeTab=e,this.loadTabContent()})}),Object.defineProperty(this,"renderFileItem",{enumerable:!0,configurable:!0,writable:!0,value:({name:e,type:s,html_url:t,download_url:r})=>(0,a.jsxs)("li",{className:"list-group-item",children:[(0,a.jsx)("i",{className:`fa ${"file"!==s?"fa-folder":"fa-file"}`})," ",(0,a.jsx)("a",{href:t||"",target:"_blank",rel:"noreferrer",children:e}),"file"===s&&r&&(0,a.jsx)("a",{href:r,className:"btn btn-xs btn-default pull-right",download:e,children:"下载"})]},e)}),Object.defineProperty(this,"renderCommitItem",{enumerable:!0,configurable:!0,writable:!0,value:({sha:e,commit:s,author:t,html_url:r})=>{var i;return(0,a.jsxs)("div",{className:"media",children:[(0,a.jsx)("div",{className:"media-left",children:t&&(0,a.jsx)("img",{src:t.avatar_url,className:"media-object",style:{width:"40px",height:"40px"},alt:t.login})}),(0,a.jsxs)("div",{className:"media-body",children:[(0,a.jsx)("h5",{className:"media-heading",children:(0,a.jsx)("a",{href:r,target:"_blank",rel:"noreferrer",children:s.message.split("\n")[0]})}),(0,a.jsxs)("small",{children:[null==t?void 0:t.login," committed on"," ",new Date((null==(i=s.author)?void 0:i.date)||"").toLocaleDateString("zh-CN")]})]})]},e)}}),Object.defineProperty(this,"renderIssueItem",{enumerable:!0,configurable:!0,writable:!0,value:({number:e,title:s,state:t,user:r,created_at:i})=>(0,a.jsxs)("div",{className:"media",children:[(0,a.jsx)("div",{className:"media-left",children:(0,a.jsx)("img",{src:null==r?void 0:r.avatar_url,className:"media-object",style:{width:"40px",height:"40px"},alt:null==r?void 0:r.login})}),(0,a.jsxs)("div",{className:"media-body",children:[(0,a.jsxs)("h5",{className:"media-heading",children:[(0,a.jsxs)("a",{href:`#/repos/${this.owner}/${this.repo}/issues/${e}`,children:["#",e," ",s]}),(0,a.jsx)("span",{className:`label label-${"open"===t?"success":"danger"}`,children:"open"===t?"开启":"关闭"})]}),(0,a.jsxs)("small",{children:[null==r?void 0:r.login," created on ",new Date(i).toLocaleDateString("zh-CN")]})]})]},e)}),Object.defineProperty(this,"renderMilestoneItem",{enumerable:!0,configurable:!0,writable:!0,value:({number:e,title:s,description:t,state:r,creator:i,created_at:l,open_issues:n,closed_issues:c})=>(0,a.jsx)("div",{className:"panel panel-default",children:(0,a.jsxs)("div",{className:"panel-body",children:[(0,a.jsxs)("h4",{children:[(0,a.jsx)("a",{href:`#/repos/${this.owner}/${this.repo}/milestones/${e}`,children:s}),(0,a.jsx)("span",{className:`label label-${"open"===r?"success":"danger"}`,children:"open"===r?"开启":"关闭"})]}),t&&(0,a.jsx)("p",{children:t}),(0,a.jsx)("div",{className:"progress",children:(0,a.jsxs)("div",{className:"progress-bar",style:{width:`${c/(n+c)*100}%`},children:[c,"/",n+c]})}),(0,a.jsxs)("small",{children:["Created by ",null==i?void 0:i.login," on"," ",new Date(l).toLocaleDateString("zh-CN")]})]})},e)})}get owner(){return d(this,m,"f")}set owner(e){h(this,m,e,"f")}get repo(){return d(this,u,"f")}set repo(e){h(this,u,e,"f")}get activeTab(){return d(this,p,"f")}set activeTab(e){h(this,p,e,"f")}mountedCallback(){this.owner&&this.repo&&(n.githubStore.fetchRepository(this.owner,this.repo),this.loadTabContent())}loadTabContent(){if(this.owner&&this.repo)switch(this.activeTab){case"source":n.githubStore.fetchRepoContents(this.owner,this.repo);break;case"commits":n.githubStore.fetchRepoCommits(this.owner,this.repo);break;case"issues":n.githubStore.fetchRepoIssues(this.owner,this.repo);break;case"milestones":n.githubStore.fetchRepoMilestones(this.owner,this.repo)}}renderTabContent(){let{downloading:e,repoContents:s,repoCommits:t,repoIssues:r,repoMilestones:i}=n.githubStore;if(e>0)return(0,a.jsx)(l.Loading,{});switch(this.activeTab){case"source":return(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{children:"源代码文件"}),0===s.length?(0,a.jsx)("p",{children:"没有找到文件"}):(0,a.jsx)("ul",{className:"list-group",children:s.map(this.renderFileItem)})]});case"commits":return(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{children:"提交历史"}),0===t.length?(0,a.jsx)("p",{children:"没有找到提交记录"}):(0,a.jsx)("div",{children:t.map(this.renderCommitItem)})]});case"issues":return(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{children:"问题列表"}),0===r.length?(0,a.jsx)("p",{children:"没有找到问题"}):(0,a.jsx)("div",{children:r.map(this.renderIssueItem)})]});case"milestones":return(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{children:"里程碑"}),0===i.length?(0,a.jsx)("p",{children:"没有找到里程碑"}):(0,a.jsx)("div",{children:i.map(this.renderMilestoneItem)})]});default:return null}}render(){let{currentRepo:e,downloading:s}=n.githubStore;return s>0&&!e?(0,a.jsx)(l.Loading,{}):e?(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"col-md-12",children:[(0,a.jsx)("h2",{children:e.full_name}),(0,a.jsx)("p",{className:"lead",children:e.description||"无描述"}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-md-8",children:(0,a.jsx)("div",{className:"panel panel-default",children:(0,a.jsx)("div",{className:"panel-body",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-xs-3 text-center",children:[(0,a.jsx)("strong",{children:e.stargazers_count}),(0,a.jsx)("br",{}),(0,a.jsx)("small",{children:"Stars"})]}),(0,a.jsxs)("div",{className:"col-xs-3 text-center",children:[(0,a.jsx)("strong",{children:e.forks_count}),(0,a.jsx)("br",{}),(0,a.jsx)("small",{children:"Forks"})]}),(0,a.jsxs)("div",{className:"col-xs-3 text-center",children:[(0,a.jsx)("strong",{children:e.language||"N/A"}),(0,a.jsx)("br",{}),(0,a.jsx)("small",{children:"语言"})]}),(0,a.jsx)("div",{className:"col-xs-3 text-center",children:(0,a.jsx)("a",{href:e.html_url,target:"_blank",className:"btn btn-primary btn-sm",rel:"noreferrer",children:"查看仓库"})})]})})})}),(0,a.jsx)("div",{className:"col-md-4",children:(0,a.jsxs)("div",{className:"panel panel-default",children:[(0,a.jsx)("div",{className:"panel-heading",children:"仓库所有者"}),(0,a.jsxs)("div",{className:"panel-body text-center",children:[(0,a.jsx)("img",{src:e.owner.avatar_url,className:"img-circle",width:64,height:64,alt:e.owner.login}),(0,a.jsx)("h4",{children:(0,a.jsx)("a",{href:`#/users/${e.owner.login}`,children:e.owner.login})})]})]})})]}),(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"col-md-12",children:[(0,a.jsxs)("ul",{className:"nav nav-tabs",children:[(0,a.jsx)("li",{className:"source"===this.activeTab?"active":"",children:(0,a.jsx)("a",{href:"#",onClick:()=>this.handleTabClick("source"),children:"源代码"})}),(0,a.jsx)("li",{className:"commits"===this.activeTab?"active":"",children:(0,a.jsx)("a",{href:"#",onClick:()=>this.handleTabClick("commits"),children:"开发流"})}),(0,a.jsx)("li",{className:"issues"===this.activeTab?"active":"",children:(0,a.jsxs)("a",{href:"#",onClick:()=>this.handleTabClick("issues"),children:["问题集",(0,a.jsx)("span",{className:"badge",children:e.open_issues_count})]})}),(0,a.jsx)("li",{className:"milestones"===this.activeTab?"active":"",children:(0,a.jsx)("a",{href:"#",onClick:()=>this.handleTabClick("milestones"),children:"路线图"})})]}),(0,a.jsx)("div",{className:"tab-content",style:{marginTop:"20px"},children:this.renderTabContent()})]})})]})}):(0,a.jsx)("div",{children:"仓库不存在"})}},m=new WeakMap,u=new WeakMap,p=new WeakMap,e=x,"symbol"==typeof(s="RepoPage")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:s});let S="function"==typeof Symbol&&Symbol.metadata?Object.create(null!=(t=N[Symbol.metadata])?t:null):void 0;return j=[r.observable,i.attribute],v=[r.observable,i.attribute],f=[r.observable],c(x,null,j,{kind:"accessor",name:"owner",static:!1,private:!1,access:{has:e=>"owner"in e,get:e=>e.owner,set:(e,s)=>{e.owner=s}},metadata:S},y,T),c(x,null,v,{kind:"accessor",name:"repo",static:!1,private:!1,access:{has:e=>"repo"in e,get:e=>e.repo,set:(e,s)=>{e.repo=s}},metadata:S},C,k),c(x,null,f,{kind:"accessor",name:"activeTab",static:!1,private:!1,access:{has:e=>"activeTab"in e,get:e=>e.activeTab,set:(e,s)=>{e.activeTab=s}},metadata:S},_,P),c(null,b={value:x},g,{kind:"class",name:x.name,metadata:S},null,w),x=b.value,S&&Object.defineProperty(x,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),o(x,w),x})()});
//# sourceMappingURL=Repo.6a5e46ae.js.map
